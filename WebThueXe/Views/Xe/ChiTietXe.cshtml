@model WebThueXe.Models.Xe

@{
    ViewBag.Title = "ChiTietXe";
    Layout = "~/Views/Shared/_LayoutTimKiem.cshtml";
}

<h5>@Html.DisplayFor(model => model.tenXe)</h5>
<div class="container" style="border: 1px solid black">
    <br />
    <div class="row">
        <div class="col-md-8">
            <div id="carouselIndicators" class="carousel slide" data-ride="carousel">
                <ol class="carousel-indicators">
                    <li data-target="#carouselIndicators" data-slide-to="0" class="active"></li>
                    <li data-target="#carouselIndicators" data-slide-to="1"></li>
                    <li data-target="#carouselIndicators" data-slide-to="2"></li>
                </ol>
                <div class="carousel-inner">
                    <div class="carousel-item active">
                        <img src="~/Content/images/backgroundCar1.jpg" class="d-block w-100" alt="..." height="300" />
                    </div>
                    <div class="carousel-item">
                        <img src="~/Content/images/backgroundCar2.jpg" class="d-block w-100" alt="..." height="300" />
                    </div>
                    <div class="carousel-item">
                        <img src="~/Content/images/backgroundCar3.jpg" class="d-block w-100" alt="..." height="300" />
                    </div>
                </div>
                <a class="carousel-control-prev" href="#carouselIndicators" role="button"
                   data-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="sr-only">Previous</span>
                </a>
                <a class="carousel-control-next" href="#carouselIndicators" role="button"
                   data-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="sr-only">Next</span>
                </a>
            </div>
        </div>
        <div class="col-md-4">
            <br />
            <div class="container">
                <div class="row">
                    <div class="clearfix"></div>
                    <div class="col-md-8">
                        <div class="container">
                            <div class="row">
                                <div class="col-md-12">
                                    <h5>@Html.DisplayFor(model => model.HieuXe.tenHieuXe)</h5>
                                    <hr />
                                    <p>Loại xe: @Html.DisplayFor(model => model.LoaiXe.tenLoaiXe)</p>
                                    <hr />
                                    <p>Máy lạnh</p>
                                    <hr />
                                    <p>CD, MP3</p>
                                    <hr />
                                    <p>Biển số: @Html.DisplayFor(model => model.bienSo)</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <br />
        </div>
        <div class="col-md-12">
            <br />
        </div>
    </div>
</div>
<br>
<div class="container" style="border: 1px solid black;padding:15px">
    <h4 class="text-center">Thời gian bạn đi</h4>
    <div class="container" style="border: 1px solid black">
        <p><strong>Địa điểm nhận xe: </strong></p>
    </div>
    <div class="row">
        <div class="col-md-6">
            <div class="container">
                <div class="row">
                    <div class="col-md-6">
                        <p>Ngày nhận xe</p>
                    </div>
                    <div class="col-md-6">
                        <p>
                            <input type="date" class="form-control" id="datetimepickerNgayNhan" onchange="countDay()" value="@DateTime.Today.ToString("yyyy-MM-dd")" />
                        </p>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="container">
                <div class="row">
                    <div class="col-md-6">
                        <p>Ngày trả xe</p>
                    </div>
                    <div class="col-md-6">
                        <p>
                            <input type="date" class="form-control" id="datetimepickerNgayTra" onchange="countDay()" value="@(DateTime.Today.AddDays(1).ToString("yyyy-MM-dd"))" />
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<br>
<div class="container" style="border: 1px solid black;padding: 15px;">
    <h4 class="text-center">Đơn giá xe</h4>
    <div class="row" style="justify-content:center">
        <div class="col-md-6">
            <p>Loại xe</p>
        </div>
        <div class="col-md-6">
            <p class="text-right">@Html.DisplayFor(model => model.LoaiXe.tenLoaiXe)</p>
        </div>

        <hr style="width:100%" />
        <div class="col-md-6">
            <p>Giá thuê xe</p>
        </div>
        <div class="col-md-6">
            <p class="text-right" id="giathue">@Html.DisplayFor(model => model.giaThueXe)</p>
        </div>
        <hr style="width:100%" />
        <div class="col-md-6">
            <p>Số ngày thuê</p>
        </div>
        <div class="col-md-6">
            <p class="text-right" id="SoNgayThue">1</p>
        </div>
        <hr style="width:100%" />
        <div class="col-md-6">
            <p>Thành tiền</p>
        </div>
        <div class="col-md-6">
            <p class="text-right" id="thanhTien"></p>
        </div>

        <button type="submit" class="btn btn-lg btn-primary text-right text-center" onclick="location.href='@Url.Action("HopDongThueXe", "Xe")'">
            Tiếp tục
        </button>
    </div>
</div>
<script src="~/Scripts/jquery-3.4.1.js"></script>
<script>
    const predate1 = document.getElementById("datetimepickerNgayNhan").value
    const predate2 = document.getElementById("datetimepickerNgayTra").value
    function countDay() {
        const date1 = Date.parse(document.getElementById("datetimepickerNgayNhan").value);
        const date2 = Date.parse(document.getElementById("datetimepickerNgayTra").value);
        const oneDay = 24 * 60 * 60 * 1000;
        if (date2 - date1 > 0) {
            const diffDays = Math.round((date2 - date1) / oneDay);
            document.getElementById("SoNgayThue").innerHTML = diffDays;

            var tienThue = @Model.giaThueXe;
            var thanhTien = diffDays * tienThue;
            document.getElementById("thanhTien").innerHTML = thanhTien;
        }
        else {
            alert("Ngày trả không được nhỏ hơn ngày nhận");
            document.getElementById("datetimepickerNgayNhan").value = predate1;
            document.getElementById("datetimepickerNgayTra").value = predate2;

        }
    };
    countDay();
</script>